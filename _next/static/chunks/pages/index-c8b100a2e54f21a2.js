(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(1761)}])},1761:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return ac}});var d=c(603),e=c(5893),f=c(7294),g=c(9008),h=c.n(g),i=function(a){var b=a.title,c=a.description;return(0,e.jsxs)(h(),{children:[(0,e.jsx)("title",{children:b||"Baesta Map"}),(0,e.jsx)("meta",{name:"description",content:c||"後で書くよー"}),(0,e.jsx)("link",{rel:"icon",href:"/BaestaMap/favicon.ico"})]})},j=i,k=c(1799),l=c(9534),m=c(1664),n=c.n(m),o=c(2293),p=c(5333),q=c(155),r=c(3946),s=c(326),t=c(878),u=c(8462),v=c(891),w=f.forwardRef(function(a,b){var c=a.href,d=(0,l.Z)(a,["href"]);return c.startsWith("http")?(0,e.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none",color:"#212121"},children:(0,e.jsx)(v.ZP,(0,k.Z)({component:"a",button:!0,ref:b},d))}):(0,e.jsx)(n(),{href:c,passHref:!0,children:(0,e.jsx)(v.ZP,(0,k.Z)({component:"a",button:!0,ref:b},d))})});function x(){var a=(0,d.Z)(f.useState(!1),2),b=a[0],c=a[1],g=function(){c(!b)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(p.Z,{sx:{flexGrow:1,width:"100%",height:"2em",margin:"0"},children:(0,e.jsx)(o.Z,{position:"static",children:(0,e.jsxs)(q.Z,{sx:{width:"100%",backgroundColor:"#2C2C2C"},children:[(0,e.jsx)(n(),{href:"/",passHref:!0,style:{margin:"auto auto auto 0"},children:(0,e.jsx)("a",{children:(0,e.jsx)("img",{alt:"logo",src:"/BaestaMap/imgs/logo.png",style:{height:"50px"}})})}),(0,e.jsx)(r.Z,{size:"large",edge:"start","aria-label":"menu",sx:{m:"auto 0 auto auto",color:"#EC9CFC"},onClick:g,children:(0,e.jsx)(s.Z,{})})]})})}),(0,e.jsx)(t.ZP,{anchor:"top",variant:"temporary",open:b,onClose:g,style:{transform:"translateY(56px)"},children:(0,e.jsxs)(u.Z,{sx:{backgroundColor:"#6B6B6B",color:"#FFFFFF"},children:[(0,e.jsx)(w,{sx:{color:"#FFFFFF"},href:"https://baestamap.notion.site/BaestaMap-45431cdb1eec46a0837b07437d985b64",children:"About BaestaMap"}),(0,e.jsx)(w,{sx:{color:"#FFFFFF"},href:"https://forms.gle/dAY5eGH4ZWyXhNJz8",children:"Contact"}),(0,e.jsx)(w,{sx:{color:"#FFFFFF"},href:"https://github.com/wanwan0622/BaestaMap",children:"GitHub"})]})})]})}var y=c(7568),z=c(9396),A=c(4051),B=c.n(A);function C(){return D.apply(this,arguments)}function D(){return(D=(0,y.Z)(B().mark(function a(){var b,c,d;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=function(){return new Promise(function(a,b){navigator.geolocation.getCurrentPosition(a,function(){b(),alert("現在地が取得できませんでした")})})},a.next=3,b();case 3:return d={lat:(c=a.sent).coords.latitude,lng:c.coords.longitude},a.abrupt("return",d);case 6:case"end":return a.stop()}},a)}))).apply(this,arguments)}function E(a){return F.apply(this,arguments)}function F(){return(F=(0,y.Z)(B().mark(function a(b){var c,d,e;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=[],"現在地"!==b){a.next=13;break}return a.next=4,C();case 4:if(d=a.sent,console.log("現在"),console.log(d),!(void 0===d.lat&& void 0===d.lng)){a.next=9;break}return a.abrupt("return",[]);case 9:return a.next=11,fetch("https://baestamap-qpz6p6e7bq-uc.a.run.app",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(function(a){return a.json()}).then(function(a){a.success?c=a.posts:console.error("APIの取得に失敗しました")}).catch(function(a){console.error(a)});case 11:a.next=16;break;case 13:return e={query:b},a.next=16,fetch("https://baestamap-query-qpz6p6e7bq-uc.a.run.app",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(a){return a.json()}).then(function(a){a.success?c=a.posts:console.error("APIの取得に失敗しました")}).catch(function(a){console.error(a)});case 16:return console.log(c),a.abrupt("return",c);case 18:case"end":return a.stop()}},a)}))).apply(this,arguments)}var G=c(46),H=c(5545),I=c(4137),J=c(2761);function K(a){return(0,e.jsx)(H.Z,{disablePortal:!0,id:"combo-box-demo",options:[{label:"現在地"},{label:"サポーターズ本社"}],sx:{width:"80%",height:"20px",m:"auto auto 40px auto"},freeSolo:!0,disableClearable:!0,onInputChange:function(b,c){return a.setInputPlace(c)},renderInput:function(b){return(0,e.jsx)(G.Z,(0,z.Z)((0,k.Z)({},b),{label:"どこでデートする？",placeholder:"東京駅",onChange:function(b){return a.setInputPlace(b.target.value)},InputProps:(0,z.Z)((0,k.Z)({},b.InputProps),{endAdornment:(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(I.Z,{position:"end",children:(0,e.jsx)(r.Z,{onClick:(0,y.Z)(B().mark(function b(){var c,d;return B().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return a.setIsLoading(!0),b.next=3,E(a.inputPlace);case 3:return c=b.sent,b.next=6,N(a.inputPlace);case 6:d=b.sent,a.setPlaces(c),void 0!==d&&a.setCenter(d),a.setIsLoading(!1);case 10:case"end":return b.stop()}},b)})),children:(0,e.jsx)(J.Z,{sx:{color:"#FA45FA",fontSize:"large"}})})})})})}))}})}function L(a){return M.apply(this,arguments)}function M(){return(M=(0,y.Z)(B().mark(function a(b){var c,d;return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=void 0,d={query:b},a.next=4,fetch("https://baestamap-location-qpz6p6e7bq-uc.a.run.app",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}).then(function(a){return a.json()}).then(function(a){a.success?c=a.location:console.error("APIの取得に失敗しました")}).catch(function(a){console.error(a)});case 4:return a.abrupt("return",c);case 5:case"end":return a.stop()}},a)}))).apply(this,arguments)}function N(a){return O.apply(this,arguments)}function O(){return(O=(0,y.Z)(B().mark(function a(b){return B().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("現在地"!==b){a.next=6;break}return a.next=3,C();case 3:case 8:return a.abrupt("return",a.sent);case 6:return a.next=8,L(b);case 9:case"end":return a.stop()}},a)}))).apply(this,arguments)}var P=c(6066),Q=c(2019),R=c(8456),S=c(4386),T=c(8525);function U(a){return(0,e.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,e.jsx)(T.InstagramEmbed,{url:"https://www.instagram.com/p/".concat(a.place.permalink,"/"),width:328},a.place.permalink)})}var V={width:"350px",height:"250px",border:"3px solid #FC9CFC",padding:"15px",margin:"12px auto 4px auto",fontSize:"15px",overflowY:"scroll"};function W(a){var b=(0,f.useState)(0),c=b[0],d=b[1],g=(0,f.useState)(void 0),h=g[0],i=g[1],j=(0,f.useState)(void 0),l=j[0],m=j[1];return(0,e.jsx)("div",{style:{width:"100%"},children:(0,e.jsxs)(P.Z,(0,z.Z)((0,k.Z)({},{dots:!0,arrows:!1,centerMode:!0,centerPadding:"10px",infinite:!1,draggable:!0,speed:500,customPaging:function(a){if(0===a){var b=0===c?"disabled":"action";return(0,e.jsx)(S.Z,{arrow:!0,title:"投稿一覧",children:(0,e.jsx)(Q.Z,{color:b,sx:{fontSize:"80%"}})})}if(1===a){var d=1===c?"disabled":"action";return(0,e.jsx)(S.Z,{arrow:!0,title:"Instagram",children:(0,e.jsx)(Q.Z,{color:d,sx:{fontSize:"80%"}})})}return(0,e.jsx)(S.Z,{arrow:!0,title:"詳細",children:(0,e.jsx)(Q.Z,{color:2===c?"disabled":"action",sx:{fontSize:"80%"}})})},beforeChange:function(a,b){return d(b)}}),{ref:function(a){a&&m(a)},children:[(0,e.jsx)("div",{children:(0,e.jsx)("div",{style:V,children:a.isLoading?(0,e.jsx)("div",{style:{textAlign:"center"},children:(0,e.jsx)(R.Z,{})}):0!=a.places.length?a.places.map(function(a,b){return(0,e.jsxs)("div",{style:{backgroundColor:"#FFCCFF",padding:"10px",margin:"4px",borderRadius:"4px"},onClick:function(){i(a),l&&l.slickGoTo(1)},children:[b+1," ",a.location.name]},b)}):(0,e.jsx)("div",{children:"検索をしていない、または投稿がありません"})})}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{style:V,children:(0,e.jsx)("div",{style:{width:"100%"},children:void 0!==h||0!==a.places.length?(0,e.jsx)(U,{place:null!=h?h:a.places[0]}):(0,e.jsx)(e.Fragment,{children:"Now Loading..."})})})}),(0,e.jsx)("div",{children:(0,e.jsx)("div",{style:V,children:void 0!==h?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("p",{style:{color:"#FA45FA",fontSize:"16px"},children:h.location.name}),(0,e.jsx)("p",{children:(0,e.jsx)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(h.location.lat,",").concat(h.location.lng),target:"_blank",rel:"noreferrer noopener",style:{color:"blue"},children:"Google Map"})}),(0,e.jsxs)("p",{children:["データ取得日 : ",h.timestamp.split("T")[0]]})]}):(0,e.jsx)(e.Fragment,{children:"Now Loading..."})})})]}))})}var X=c(7054),Y={width:"300px",height:"300px"},Z={disableDefaultUI:!0,zoomControl:!0};function $(a){return(0,e.jsx)(X.KJ,{googleMapsApiKey:"AIzaSyD0YxWS2l_jq0TWTNYAaNv-e7IZ1ILLAVQ",children:(0,e.jsx)(X.b6,{mapContainerStyle:Y,center:a.center,zoom:13,options:Z,children:a.places.map(function(a,b){return(0,e.jsx)(X.jC,{position:{lat:a.location.lat,lng:a.location.lng},label:(b+1).toString()},b)})})})}var _=c(214),aa=c.n(_);c(8322),c(2739);var ab=function(){var a=(0,d.Z)(f.useState([]),2),b=a[0],c=a[1],g=(0,d.Z)(f.useState("現在地"),2),h=g[0],i=g[1],k=(0,d.Z)(f.useState({lat:35.68,lng:139.76}),2),l=k[0],m=k[1],n=(0,d.Z)(f.useState(!1),2),o=n[0],p=n[1];return(0,e.jsxs)("div",{style:{padding:"0"},children:[(0,e.jsx)(x,{}),(0,e.jsx)(j,{title:"Baesta Map",description:"簡単に近くの映えるデートスポットが探せる"}),(0,e.jsxs)("main",{style:{margin:"50px 0 0 0"},className:aa().main,children:[(0,e.jsx)(K,{setPlaces:c,inputPlace:h,setInputPlace:i,setCenter:m,setIsLoading:p}),(0,e.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,e.jsx)($,{places:b,inputPlace:h,center:l})}),(0,e.jsx)(W,{places:b,isLoading:o})]})]})},ac=ab},214:function(a){a.exports={container:"Home_container__bCOhY",main:"Home_main__nLjiQ",footer:"Home_footer____T7K",title:"Home_title__T09hD",description:"Home_description__41Owk",code:"Home_code__suPER",grid:"Home_grid__GxQ85",card:"Home_card___LpL1",logo:"Home_logo__27_tb"}}},function(a){a.O(0,[255,620,774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])